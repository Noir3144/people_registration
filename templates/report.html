<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Report Missing Person</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="ios-bg">
  <header class="topbar">
    <div class="brand">Crowd Portal</div>
    <nav>
      <a href="{{ url_for('language') }}" class="link">Language</a>
      <a href="{{ url_for('index') }}" class="link">Register</a>
      <a href="#" id="notif-btn-2" class="link">Notifications</a>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <h2>Report Missing Person</h2>
      <form id="missing-form" method="POST" action="{{ url_for('submit_missing') }}" enctype="multipart/form-data">
        <div class="field">
          <label>Phone (required)</label>
          <input type="text" name="phone" required placeholder="+91xxxxxxxxxx">
        </div>

        <div class="field">
          <label>WhatsApp (required)</label>
          <input type="text" name="whatsapp" required placeholder="+91xxxxxxxxxx">
        </div>

        <div class="field">
          <label>Description</label>
          <textarea name="description" placeholder="Short description (clothes, age, location)"></textarea>
        </div>

        <div class="field">
          <label>Photos (upload)</label>
          <div id="missing-slots" class="slots"></div>
          <!-- hidden file input used for the missing form uploads -->
          <input type="file" name="missing_photos" id="missing-hidden-input" accept="image/*" style="display:none" multiple>
          <div class="muted small">Use the upload slot to select photos from device or computer. New slots appear after each upload.</div>
        </div>

        <div class="actions">
          <button class="btn" type="submit">Submit Missing Report</button>
        </div>
      </form>
    </section>
  </main>

  <div id="notif-modal" class="modal hidden">
    <div class="modal-card">
      <header class="modal-header">
        <h3>Notifications</h3>
        <button class="close" id="close-notif-2">&times;</button>
      </header>
      <div class="modal-body" id="notif-list-2"></div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      MissingForm.initUploadSlots();
      Notif.init('#notif-btn-2', '#notif-modal', '#notif-list-2', '#close-notif-2');
    });
  </script>
</body>
</html>
